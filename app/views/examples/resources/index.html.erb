<h3>Resource Access API</h3>

<div class="information-box">
	<p>This page explains how to use the fitgem library to connect to <a href="http://wiki.fitbit.com/display/API/Resource-Access-API">fitbit.com's resource access API</a>.</p>
</div>

<p>Fitbit considers a 'resource' to be any of the nouns associated with health tracking. Examples include foods consumed, activities participated in, characteristics of your tracker device, and body measurements.</p>

<h4>Available Resources</h4>
<p>Each resource below will include sample code on how to access it using fitgem. I will generally defer to the Fitbit Developer site for complete API documentation as I don't wish this site to get out of date too quickly.  Instead I'll focus on just the mechanics of using the library to interface with the API.</p>
<p>If you are logged into the site and have connected your login with a Fitbit account, then in each section you'll also see the relevant data retrieved using the API described there.</p>
<ul class="toc">
	<li><a href="#userinfo">User Information</a></li>
	<li><a href="#body">Body Measurements</a></li>
	<li><a href="#activities">Activities</a></li>
	<li><a href="#foods">Foods</a></li>
</ul>

<h4><a name="userinfo">User Information</a></h4>
<div class="information-box">
	<p><a href="http://wiki.fitbit.com/display/API/API-Get-User-Info">View the Fitbit reference page for user information.</a></p>
</div>
<p>The user information interface is used to access whatever profile information that the user has allowed to be viewed publicly.  This includes information such as the user's name, fitbit user id, gender, height, etc.  <strong>Please note</strong> that the user must explicitly allow this info to be shared or else it will not show up in the data returned by the service.</p>

<h5>Getting Access to User Information</h5>
<p>In your controller action, for example:</p>
<pre>
def index
  unless current_user.fitbit_account.verified?
    flash[:alert] = "Your test account is not connected to 
      a Fitbit account."
    redirect_to :action => :index and return
  end
  client = FitgemClientWrapper.new(current_user.fitbit_account)
  @info = client.user_info['user']
end
</pre>

<h5>User Information in a View</h5>
<p>Below is example ERB code showing how the <code>@info</code> object is used in a view.</p>
<pre>
&lt;div class=&quot;fitbit-api-data&quot;&gt;
  &lt;div class=&quot;line-title&quot;&gt;User Information from Fitbit.com&lt;/div&gt;
  &lt;div class=&quot;line-item&quot;&gt;
		&lt;div class=&quot;label&quot;&gt;User Id:&lt;/div&gt; 
		&lt;div class=&quot;value&quot;&gt;&lt;%= @info[&#x27;encodedId&#x27;] %&gt;&lt;/div&gt;
	&lt;/div&gt;
	&lt;div class=&quot;line-item&quot;&gt;
		&lt;div class=&quot;label&quot;&gt;Display Name:&lt;/div&gt; 
		&lt;div class=&quot;value&quot;&gt;&lt;%= @info[&#x27;displayName&#x27;] %&gt;&lt;/div&gt;
	&lt;/div&gt;
	&lt;div class=&quot;line-item&quot;&gt;
		&lt;div class=&quot;label&quot;&gt;City:&lt;/div&gt; 
		&lt;div class=&quot;value&quot;&gt;&lt;%= @info[&#x27;city&#x27;] %&gt;&lt;/div&gt;
	&lt;/div&gt;
	&lt;div class=&quot;line-item&quot;&gt;
		&lt;div class=&quot;label&quot;&gt;State:&lt;/div&gt; 
		&lt;div class=&quot;value&quot;&gt;&lt;%= @info[&#x27;state&#x27;] %&gt;&lt;/div&gt;
	&lt;/div&gt;
	&lt;div class=&quot;line-item&quot;&gt;
		&lt;div class=&quot;label&quot;&gt;Gender:&lt;/div&gt; 
		&lt;div class=&quot;value&quot;&gt;&lt;%= @info[&#x27;gender&#x27;] %&gt;&lt;/div&gt;
	&lt;/div&gt;
	&lt;div class=&quot;line-item&quot;&gt;
		&lt;div class=&quot;label&quot;&gt;Date of Birth:&lt;/div&gt; 
		&lt;div class=&quot;value&quot;&gt;&lt;%= @info[&#x27;dateOfBirth&#x27;] %&gt;&lt;/div&gt;
	&lt;/div&gt;
&lt;/div&gt;
</pre>

<h5>User Information Example</h5>
<p>Below are the results of the above view code using your personal fitbit data.</p>
<% if user_signed_in? && current_user.fitbit_account.verified? %>
  
		
  <div class="fitbit-api-data">
    <div class="line-title">User Information from Fitbit.com</div>
    <div class="line-item">
  		<div class="label">User Id:</div> 
  		<div class="value"><%= @info['encodedId'] %></div>
  	</div>
  	<div class="line-item">
  		<div class="label">Display Name:</div> 
  		<div class="value"><%= @info['displayName'] %></div>
  	</div>
  	<div class="line-item">
  		<div class="label">City:</div> 
  		<div class="value"><%= @info['city'] %></div>
  	</div>
  	<div class="line-item">
  		<div class="label">State:</div> 
  		<div class="value"><%= @info['state'] %></div>
  	</div>
  	<div class="line-item">
  		<div class="label">Gender:</div> 
  		<div class="value"><%= @info['gender'] %></div>
  	</div>
  	<div class="line-item">
  		<div class="label">Date of Birth:</div> 
  		<div class="value"><%= @info['dateOfBirth'] %></div>
  	</div>
  </div>

  <div style="clear:both;">&nbsp;</div>
<% elsif user_signed_in? %>
  <%= render :partial => 'examples/link' %>
<% else %>
  <%= render :partial => 'examples/login_and_link' %>
<% end %>

<h4><a name="body">Body Measurements</a></h4>

<h4><a name="activities">Activities</a></h4>

<h4><a name="foods">Foods</a></h4>